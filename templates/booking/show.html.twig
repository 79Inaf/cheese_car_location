{% extends 'base.html.twig' %}

{% block title %}Créneau
{% endblock %}

{% block body %}
	<h1>Créneau</h1>

	<table class="table m-3">
		<tbody>
			<tr>
				<th>Du</th>
				<td>{{ booking.beginAt ? booking.beginAt|date('Y-m-d H:i:s') : '' }}</td>
			</tr>
			<tr>
				<th>Au</th>
				<td>{{ booking.endAt ? booking.endAt|date('Y-m-d H:i:s') : '' }}</td>
			</tr>
			<tr>
				<th>Statut</th>
				<td>{{ booking.title }}</td>
			</tr>
		</tbody>
	</table>

	{% if is_granted('ROLE_OWNER') %}
		{% if app.user.id == booking.vehicle.owner.id %}
			<a class="btn btn-warning" href="{{ path('app_booking_edit', {'id': booking.id}) }}">modifier</a>

			{{ include('booking/_delete_form.html.twig') }}
		{% endif %}
	{% endif %}

	<div class="col-12 col-md-6">
		<div class="container bloc_test">
			<div class="row">
				<div class="mb-3 mx-auto">
					<div class="align-middle">
						<h1 class="text-center m-5">Comments</h1>
						<form class="form-idea form bg-lightgrey p-3 shadow bg-light" method="post" action="#anchor">
							{{ form_start(form) }}
							{{ form_errors(form) }}
							<div>
								{{ form_row(form.content)}}
								{{ form_errors(form.content)}}
							</div>
							<div class="text-center">
								{{ form_row(form.submit) }}
							</div>
							{{ form_end(form) }}
						</form>
					</div>
				</div>
			</div>
		</div>

		{% for comment in booking.comments %}
			<div class="m-3 p-3 border border-secondary rounded border-5 bg-secondary">
				<h3>From:
					{{ comment.author.prenom }}
					{{ comment.author.nom }}</h3>
				<p>{{ comment.content }}</p>
			</div>
		{% else %}
			No comments found.
		{% endfor %}

	{% endblock %}
